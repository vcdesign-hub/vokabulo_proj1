---
import BaseLayout from '../layouts/BaseLayout.astro';
import { loadHomeCopy } from '../utils/home';

// Redirect root to /en/ by rendering the same content
const lang = 'en';
const home = loadHomeCopy('en');
const { hero, philosophy, featureBlocks, features, testimonials, faq, cta } = home;
---

<BaseLayout title={hero.title} description={hero.description} currentLang={lang} currentPath="">
  <style is:global>
    /* Index page-specific styles */
    :root {
      --radius: 1rem;
      --accent: #0ea5e9;
    }

    body {
      background: radial-gradient(circle at 10% 20%, #f0f4ff 0, rgba(240, 244, 255, 0) 26%),
        radial-gradient(circle at 80% 0%, #eef6ff 0, rgba(238, 246, 255, 0) 20%),
        var(--bg);
      color: var(--ink);
    }

    .card {
      border: 1px solid var(--border);
      background: #ffffff;
      border-radius: calc(var(--radius) * 1.1);
      box-shadow: var(--shadow, 0 18px 48px rgba(15, 23, 42, 0.05));
    }

    .btn-primary {
      background: linear-gradient(135deg, #0f172a, #111827 60%, #0b1224);
      color: #ffffff;
      border-radius: 9999px;
      transition: transform 150ms ease, box-shadow 150ms ease, background 150ms ease, filter 150ms ease;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 28px rgba(15, 23, 42, 0.18);
      filter: brightness(1.02);
    }

    .btn-ghost {
      border-radius: 9999px;
      transition: transform 150ms ease, box-shadow 150ms ease, border-color 150ms ease, color 150ms ease;
    }

    .btn-ghost:hover {
      transform: translateY(-1px);
      box-shadow: 0 12px 22px rgba(15, 23, 42, 0.09);
      border-color: #cbd5e1;
      color: #0f172a;
    }

    .hero-panel {
      position: relative;
      border-radius: 28px;
      border: 1px solid var(--border);
      background: linear-gradient(135deg, #ffffff 0%, #f8fbff 60%, #f6f9ff 100%);
      box-shadow: 0 24px 60px rgba(15, 23, 42, 0.07);
      overflow: hidden;
    }

    .hero-panel::after {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 20% 20%, rgba(14, 165, 233, 0.08), transparent 45%),
        radial-gradient(circle at 80% 10%, rgba(14, 165, 233, 0.06), transparent 35%);
      pointer-events: none;
    }

    .nav-gradient {
      background: linear-gradient(135deg, #f56b43 0%, #f6976f 35%, #9bb7c8 100%);
    }

    .hero-spot {
      position: relative;
      overflow: hidden;
      border-radius: 28px;
      background: radial-gradient(110% 120% at 75% 25%, rgba(247, 94, 43, 0.35), rgba(247, 94, 43, 0) 60%),
        radial-gradient(120% 120% at 20% 30%, rgba(144, 167, 192, 0.5), rgba(144, 167, 192, 0) 65%),
        #f7f8fb;
      border: 1px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 30px 80px rgba(15, 23, 42, 0.14);
    }

    .hero-spot::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.04));
      pointer-events: none;
    }

    .hero-card {
      border-radius: 22px;
      border: 1px solid rgba(255, 255, 255, 0.7);
      background: #ffffff;
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.12);
    }

    .feature-visual {
      border-radius: 24px;
      border: 1px solid rgba(255, 255, 255, 0.6);
      background: radial-gradient(120% 140% at 75% 25%, rgba(247, 94, 43, 0.35), rgba(247, 94, 43, 0) 55%),
        radial-gradient(120% 140% at 20% 30%, rgba(144, 167, 192, 0.45), rgba(144, 167, 192, 0) 65%),
        #f8fafc;
      box-shadow: 0 22px 55px rgba(15, 23, 42, 0.12);
    }

    @media (prefers-color-scheme: dark) {
      :root:not(.theme-dark) {
        color-scheme: dark;
        --bg: #0b1220;
        --border: #1f2937;
        --ink: #e5e7eb;
        --muted: #94a3b8;
        --accent: #38bdf8;
      }
    }

    .theme-dark {
      color-scheme: dark;
      --bg: #0b1220;
      --border: #1f2937;
      --ink: #e5e7eb;
      --muted: #94a3b8;
      --accent: #38bdf8;
    }

    .theme-dark body {
      background: radial-gradient(circle at 10% 20%, rgba(34, 211, 238, 0.08) 0, rgba(34, 211, 238, 0) 26%),
        radial-gradient(circle at 80% 0%, rgba(248, 113, 113, 0.12) 0, rgba(248, 113, 113, 0) 22%),
        #0b1220;
      color: var(--ink);
    }

    .theme-dark .card,
    .theme-dark .hero-card,
    .theme-dark .feature-visual {
      background: #0f1628;
      border-color: #1f2937;
      box-shadow: 0 24px 60px rgba(0, 0, 0, 0.28);
    }

    .theme-dark .hero-spot {
      background: radial-gradient(110% 120% at 75% 25%, rgba(247, 94, 43, 0.25), rgba(247, 94, 43, 0) 60%),
        radial-gradient(120% 120% at 20% 30%, rgba(56, 189, 248, 0.28), rgba(56, 189, 248, 0) 65%),
        #0c1628;
      border-color: #1f2937;
      box-shadow: 0 30px 80px rgba(0, 0, 0, 0.32);
    }

    .theme-dark .btn-primary {
      background: linear-gradient(135deg, #1f2937, #0f172a 60%, #0b1224);
    }

    .theme-dark .btn-ghost {
      color: #e2e8f0;
      border-color: #243042;
    }

    .theme-dark .btn-ghost.bg-white {
      background: #0f172a;
    }

    .theme-dark .btn-ghost:hover {
      border-color: #334155;
    }

    .theme-dark .text-slate-900,
    .theme-dark .text-slate-800,
    .theme-dark .text-slate-700 {
      color: #e5e7eb !important;
    }

    .theme-dark .text-slate-600,
    .theme-dark .text-slate-500 {
      color: #cbd5e1 !important;
    }

    .theme-dark .bg-white {
      background-color: #0f1628 !important;
    }

    .theme-dark .bg-slate-50 {
      background-color: #111827 !important;
    }

    .theme-dark .border-slate-200,
    .theme-dark .border-slate-100 {
      border-color: #1f2937 !important;
    }

    .theme-dark .shadow-soft {
      box-shadow: 0 22px 55px rgba(0, 0, 0, 0.32);
    }

    /* Nav ambient animation */
    .nav-animate {
      position: relative;
      overflow: hidden;
      isolation: isolate;
    }

    .nav-animate::before,
    .nav-animate::after {
      content: '';
      position: absolute;
      inset: -120%;
      background: radial-gradient(circle at 30% 30%, rgba(247, 126, 90, 0.28), transparent 45%),
        radial-gradient(circle at 70% 20%, rgba(147, 180, 210, 0.28), transparent 40%),
        radial-gradient(circle at 50% 70%, rgba(255, 205, 178, 0.2), transparent 50%);
      filter: blur(10px);
      animation: heroFloat 24s ease-in-out infinite;
      z-index: -1;
    }

    .nav-animate::after {
      animation-direction: reverse;
      animation-duration: 30s;
      opacity: 0.7;
    }

    .theme-dark .nav-animate::before,
    .theme-dark .nav-animate::after {
      background: radial-gradient(circle at 30% 30%, rgba(248, 113, 113, 0.22), transparent 45%),
        radial-gradient(circle at 70% 20%, rgba(56, 189, 248, 0.2), transparent 40%),
        radial-gradient(circle at 50% 70%, rgba(147, 197, 253, 0.14), transparent 50%);
    }

    /* Hero ambient animation */
    .hero-animate {
      position: relative;
      overflow: hidden;
      isolation: isolate;
    }

    .hero-animate::before,
    .hero-animate::after {
      content: '';
      position: absolute;
      inset: -30%;
      background: radial-gradient(circle at 30% 30%, rgba(247, 126, 90, 0.35), transparent 45%),
        radial-gradient(circle at 70% 20%, rgba(147, 180, 210, 0.35), transparent 40%),
        radial-gradient(circle at 40% 70%, rgba(255, 205, 178, 0.28), transparent 50%);
      filter: blur(8px);
      animation: heroFloat 18s ease-in-out infinite;
      z-index: -1;
    }

    .hero-animate::after {
      animation-direction: reverse;
      animation-duration: 24s;
      opacity: 0.7;
    }

    @keyframes heroFloat {
      0% {
        transform: translate3d(-6%, -4%, 0) scale(1);
      }
      50% {
        transform: translate3d(6%, 6%, 0) scale(1.05);
      }
      100% {
        transform: translate3d(-6%, -4%, 0) scale(1);
      }
    }

    .theme-dark .hero-animate::before,
    .theme-dark .hero-animate::after {
      background: radial-gradient(circle at 30% 30%, rgba(248, 113, 113, 0.28), transparent 45%),
        radial-gradient(circle at 70% 20%, rgba(56, 189, 248, 0.25), transparent 40%),
        radial-gradient(circle at 40% 70%, rgba(147, 197, 253, 0.18), transparent 50%);
    }
  </style>

  <section
    id="hero"
    class="hero-animate relative w-full px-4 pt-32 pb-16 md:px-6 md:pt-40 md:pb-20 min-h-screen flex flex-col items-center justify-center"
  >
    <div class="relative z-10 mx-auto flex max-w-5xl flex-col items-center gap-6 text-center">
      <div class="space-y-4">
        <h1
          class="text-5xl font-bold leading-[1.4] tracking-tight text-slate-900 sm:text-6xl sm:leading-[1.4]"
          set:html={hero.heroHeadingHtml}
        />
        <p class="text-lg text-slate-700 sm:text-xl">
          {hero.heroSubheading}
        </p>
      </div>
      <div class="flex flex-col gap-3 sm:flex-row sm:items-center">
        <a class="btn-accent px-6 py-3 text-sm font-semibold shadow-soft" href={hero.ctaHref}>
          {hero.ctaText}
        </a>
      </div>
      <div class="relative z-10 mx-auto mt-10 max-w-lg">
        <div class="hero-card p-5 sm:p-6">
          <div class="flex items-center justify-between text-sm text-slate-500">
            <span>Your week</span>
            <span class="rounded-full bg-slate-900 px-3 py-1 text-xs font-semibold text-white">Focus mode</span>
          </div>
          <div class="mt-4 space-y-2">
            <p class="text-3xl font-semibold text-slate-900">+184 new words</p>
            <p class="text-sm text-slate-600">Targets met across all lists.</p>
          </div>
          <div class="mt-6 space-y-3">
            <div class="flex items-center justify-between rounded-2xl border border-slate-100 bg-slate-50 px-4 py-3">
              <div>
                <p class="text-sm font-semibold text-slate-900">Spanish A2</p>
                <p class="text-xs text-slate-500">12/20 today ✓</p>
              </div>
              <div class="text-sm font-semibold text-emerald-600">+8</div>
            </div>
            <div class="flex items-center justify-between rounded-2xl border border-slate-100 bg-white px-4 py-3 shadow-sm">
              <div>
                <p class="text-sm font-semibold text-slate-900">French B1</p>
                <p class="text-xs text-slate-500">Review in 3 hrs</p>
              </div>
              <div class="text-sm font-semibold text-sky-600">Scheduled</div>
            </div>
            <div class="flex items-center justify-between rounded-2xl border border-slate-100 bg-white px-4 py-3 shadow-sm">
              <div>
                <p class="text-sm font-semibold text-slate-900">Italian basics</p>
                <p class="text-xs text-slate-500">Next session tomorrow</p>
              </div>
              <div class="text-sm font-semibold text-slate-500">Queued</div>
            </div>
          </div>
          <div class="mt-6 rounded-2xl border border-slate-100 bg-slate-50 px-4 py-3">
            <div class="flex items-center justify-between text-sm text-slate-600">
              <span>Streak</span>
              <span>14 days</span>
            </div>
            <div class="mt-2 h-2 rounded-full bg-white shadow-inner">
              <div class="h-2 w-3/4 rounded-full bg-slate-900"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <main class="mx-auto max-w-5xl space-y-16 px-4 pb-16 pt-12 md:space-y-24 md:px-6 md:pt-16">
    <section id="philosophy" class="space-y-10 px-4 pt-8 md:pt-12">
      <div class="mx-auto max-w-4xl space-y-3 text-center">
        <p class="text-sm font-semibold uppercase tracking-[0.16em] text-slate-500">{philosophy.kicker}</p>
        <h2 class="text-3xl font-semibold tracking-tight text-slate-900 sm:text-4xl">
          {philosophy.heading}
        </h2>
        <p class="text-lg leading-relaxed text-slate-700 sm:text-xl">
          {philosophy.subheading}
        </p>
      </div>
      <div class="mx-auto grid max-w-5xl gap-4 md:grid-cols-3">
        <article class="card flex h-full flex-col gap-3 rounded-2xl p-6 shadow-soft">
          <div class="inline-flex h-10 w-10 items-center justify-center rounded-2xl bg-slate-900 text-white shadow-soft">⌁</div>
          <h3 class="text-xl font-semibold text-slate-900">{philosophy.cards[0]?.title}</h3>
          <p class="text-lg leading-relaxed text-slate-700">
            {philosophy.cards[0]?.body}
          </p>
        </article>
        <article class="card flex h-full flex-col gap-3 rounded-2xl p-6 shadow-soft">
          <div class="inline-flex h-10 w-10 items-center justify-center rounded-2xl bg-slate-900 text-white shadow-soft">✓</div>
          <h3 class="text-xl font-semibold text-slate-900">{philosophy.cards[1]?.title}</h3>
          <p class="text-lg leading-relaxed text-slate-700">
            {philosophy.cards[1]?.body}
          </p>
        </article>
        <article class="card flex h-full flex-col gap-3 rounded-2xl p-6 shadow-soft">
          <div class="inline-flex h-10 w-10 items-center justify-center rounded-2xl bg-slate-900 text-white shadow-soft">⚡</div>
          <h3 class="text-xl font-semibold text-slate-900">{philosophy.cards[2]?.title}</h3>
          <p class="text-lg leading-relaxed text-slate-700">
            {philosophy.cards[2]?.body}
          </p>
        </article>
      </div>
    </section>

    <section id="feature-blocks" class="space-y-12 pt-4 md:space-y-16">
      <div class="space-y-3 text-center">
        <p class="text-sm font-semibold uppercase tracking-[0.12em] text-slate-500">{featureBlocks.kicker}</p>
        <h2 class="text-3xl font-semibold text-slate-900 sm:text-4xl">{featureBlocks.heading}</h2>
        <p class="text-lg leading-relaxed text-slate-700 sm:text-xl">
          {featureBlocks.subheading}
        </p>
      </div>

      <div class="space-y-10 md:space-y-14">
        <div class="grid items-center gap-8 md:grid-cols-2">
          <div class="order-1 space-y-4 md:order-1 md:pr-6">
            <div class="inline-flex items-center gap-2 rounded-full bg-white px-3 py-1 text-xs font-semibold text-slate-700 shadow-sm">
              {featureBlocks.blocks[0]?.label}
            </div>
            <h3 class="text-2xl font-semibold text-slate-900">{featureBlocks.blocks[0]?.title}</h3>
            <p class="text-base text-slate-600">
              {featureBlocks.blocks[0]?.body}
            </p>
            <div class="flex flex-wrap gap-2 text-sm text-slate-700">
              {featureBlocks.blocks[0]?.pills?.map((pill, idx) => (
                <span
                  class:list={[
                    'rounded-full',
                    'px-3',
                    'py-1',
                    idx === 0 ? 'bg-slate-900 text-white' : 'border border-slate-200 bg-white'
                  ]}
                >
                  {pill}
                </span>
              ))}
            </div>
          </div>
          <div class="order-2 feature-visual h-64 w-full md:order-2"></div>
        </div>

        <div class="grid items-center gap-8 md:grid-cols-2">
          <div class="order-2 feature-visual h-64 w-full md:order-1"></div>
          <div class="order-1 space-y-4 md:order-2 md:pl-6">
            <div class="inline-flex items-center gap-2 rounded-full bg-white px-3 py-1 text-xs font-semibold text-slate-700 shadow-sm">
              {featureBlocks.blocks[1]?.label}
            </div>
            <h3 class="text-2xl font-semibold text-slate-900">{featureBlocks.blocks[1]?.title}</h3>
            <p class="text-base text-slate-600">
              {featureBlocks.blocks[1]?.body}
            </p>
            <div class="flex flex-wrap gap-2 text-sm text-slate-700">
              {featureBlocks.blocks[1]?.pills?.map((pill, idx) => (
                <span
                  class:list={[
                    'rounded-full',
                    'px-3',
                    'py-1',
                    idx === 0 ? 'bg-slate-900 text-white' : 'border border-slate-200 bg-white'
                  ]}
                >
                  {pill}
                </span>
              ))}
            </div>
          </div>
        </div>

        <div class="grid items-center gap-8 md:grid-cols-2">
          <div class="order-1 space-y-4 md:order-1 md:pr-6">
            <div class="inline-flex items-center gap-2 rounded-full bg-white px-3 py-1 text-xs font-semibold text-slate-700 shadow-sm">
              {featureBlocks.blocks[2]?.label}
            </div>
            <h3 class="text-2xl font-semibold text-slate-900">{featureBlocks.blocks[2]?.title}</h3>
            <p class="text-base text-slate-600">
              {featureBlocks.blocks[2]?.body}
            </p>
            <div class="flex flex-wrap gap-2 text-sm text-slate-700">
              {featureBlocks.blocks[2]?.pills?.map((pill, idx) => (
                <span
                  class:list={[
                    'rounded-full',
                    'px-3',
                    'py-1',
                    idx === 0 ? 'bg-slate-900 text-white' : 'border border-slate-200 bg-white'
                  ]}
                >
                  {pill}
                </span>
              ))}
            </div>
          </div>
          <div class="order-2 feature-visual h-64 w-full md:order-2"></div>
        </div>

        <div class="grid items-center gap-8 md:grid-cols-2">
          <div class="order-2 feature-visual h-64 w-full md:order-1"></div>
          <div class="order-1 space-y-4 md:order-2 md:pl-6">
            <div class="inline-flex items-center gap-2 rounded-full bg-white px-3 py-1 text-xs font-semibold text-slate-700 shadow-sm">
              {featureBlocks.blocks[3]?.label}
            </div>
            <h3 class="text-2xl font-semibold text-slate-900">{featureBlocks.blocks[3]?.title}</h3>
            <p class="text-base text-slate-600">
              {featureBlocks.blocks[3]?.body}
            </p>
            <div class="flex flex-wrap gap-2 text-sm text-slate-700">
              {featureBlocks.blocks[3]?.pills?.map((pill, idx) => (
                <span
                  class:list={[
                    'rounded-full',
                    'px-3',
                    'py-1',
                    idx === 0 ? 'bg-slate-900 text-white' : 'border border-slate-200 bg-white'
                  ]}
                >
                  {pill}
                </span>
              ))}
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="features" class="space-y-8">
      <div class="flex flex-col gap-3">
        <p class="text-sm font-semibold uppercase tracking-[0.12em] text-slate-500">{features.kicker}</p>
        <h2 class="text-2xl font-semibold text-slate-900 sm:text-3xl">
          {features.heading}
        </h2>
        <p class="max-w-3xl text-base text-slate-600">
          {features.subheading}
        </p>
      </div>
      <div class="grid gap-6 md:grid-cols-3">
        <article class="card flex flex-col gap-4 p-6 transition hover:-translate-y-1 hover:shadow-soft">
          <div class="flex h-10 w-10 items-center justify-center rounded-2xl bg-slate-900 text-white">↻</div>
          <h3 class="text-lg font-semibold text-slate-900">{features.cards[0]?.title}</h3>
          <p class="text-sm text-slate-600">
            {features.cards[0]?.body}
          </p>
        </article>
        <article class="card flex flex-col gap-4 p-6 transition hover:-translate-y-1 hover:shadow-soft">
          <div class="flex h-10 w-10 items-center justify-center rounded-2xl bg-slate-900 text-white">✔</div>
          <h3 class="text-lg font-semibold text-slate-900">{features.cards[1]?.title}</h3>
          <p class="text-sm text-slate-600">
            {features.cards[1]?.body}
          </p>
        </article>
        <article class="card flex flex-col gap-4 p-6 transition hover:-translate-y-1 hover:shadow-soft">
          <div class="flex h-10 w-10 items-center justify-center rounded-2xl bg-slate-900 text-white">⚡</div>
          <h3 class="text-lg font-semibold text-slate-900">{features.cards[2]?.title}</h3>
          <p class="text-sm text-slate-600">
            {features.cards[2]?.body}
          </p>
        </article>
      </div>
    </section>

    <section id="testimonials" class="space-y-8">
      <div class="flex flex-col gap-3">
        <p class="text-sm font-semibold uppercase tracking-[0.12em] text-slate-500">{testimonials.kicker}</p>
        <h2 class="text-2xl font-semibold text-slate-900 sm:text-3xl">{testimonials.heading}</h2>
        <p class="max-w-3xl text-base text-slate-600">
          {testimonials.subheading}
        </p>
      </div>
      <div class="grid gap-6 md:grid-cols-3">
        <article class="card flex flex-col gap-4 p-6 shadow-soft transition hover:-translate-y-1 hover:shadow-soft">
          <p class="text-sm text-slate-700">
            {testimonials.items[0]?.quote}
          </p>
          <div class="text-sm font-semibold text-slate-900">{testimonials.items[0]?.author}</div>
        </article>
        <article class="card flex flex-col gap-4 p-6 shadow-soft transition hover:-translate-y-1 hover:shadow-soft">
          <p class="text-sm text-slate-700">
            {testimonials.items[1]?.quote}
          </p>
          <div class="text-sm font-semibold text-slate-900">{testimonials.items[1]?.author}</div>
        </article>
        <article class="card flex flex-col gap-4 p-6 shadow-soft transition hover:-translate-y-1 hover:shadow-soft">
          <p class="text-sm text-slate-700">
            {testimonials.items[2]?.quote}
          </p>
          <div class="text-sm font-semibold text-slate-900">{testimonials.items[2]?.author}</div>
        </article>
      </div>
    </section>

    <section id="faq" class="space-y-6">
      <div class="flex flex-col gap-3">
        <p class="text-sm font-semibold uppercase tracking-[0.12em] text-slate-500">{faq.kicker}</p>
        <h2 class="text-2xl font-semibold text-slate-900 sm:text-3xl">{faq.heading}</h2>
        <p class="max-w-3xl text-base text-slate-600">
          {faq.subheading}
        </p>
      </div>
      <div class="space-y-3">
        {faq.items.map(item => (
          <details class="card group space-y-2 p-4">
            <summary class="flex cursor-pointer items-center justify-between gap-4 text-base font-semibold text-slate-900">
              {item.question}
              <span class="text-slate-400 transition group-open:rotate-45">+</span>
            </summary>
            <p class="pl-1 text-sm text-slate-600">
              {item.answer}
            </p>
          </details>
        ))}
      </div>
    </section>

    <section class="card flex flex-col items-center gap-4 p-8 text-center shadow-soft">
      <div class="inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-3 py-1 text-xs font-semibold uppercase tracking-[0.14em] text-slate-700 shadow-sm">
        {cta.kicker}
      </div>
      <h2 class="text-2xl font-semibold text-slate-900 sm:text-3xl">
        {cta.heading}
      </h2>
      <p class="max-w-2xl text-base text-slate-600">
        {cta.subheading}
      </p>
      <div class="flex flex-col gap-3 sm:flex-row sm:items-center">
        <a class="btn-ghost border border-slate-200 px-5 py-3 text-sm font-semibold text-slate-800" href={cta.secondaryCtaHref}>
          {cta.secondaryCtaText}
        </a>
      </div>
    </section>
  </main>
</BaseLayout>
